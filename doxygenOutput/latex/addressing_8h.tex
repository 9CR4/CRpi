\hypertarget{addressing_8h}{}\section{include/memory\+Management/addressing.h File Reference}
\label{addressing_8h}\index{include/memory\+Management/addressing.\+h@{include/memory\+Management/addressing.\+h}}


Provides helper macros for address management.  


{\ttfamily \#include $<$stdint.\+h$>$}\\*
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{addressing_8h_acdf901dd48c013338974daae498fec00}{P\+E\+R\+I\+P\+H\+E\+R\+A\+L\+\_\+\+B\+A\+S\+E\+\_\+\+A\+D\+D\+R\+\_\+\+P\+H\+Y\+S\+\_\+\+R\+P\+I2}~0x3f000000\hypertarget{addressing_8h_acdf901dd48c013338974daae498fec00}{}\label{addressing_8h_acdf901dd48c013338974daae498fec00}

\begin{DoxyCompactList}\small\item\em Physical base address of the peripherals memory area on the raspberry 2. \end{DoxyCompactList}\item 
\#define \hyperlink{addressing_8h_aa1daff414a78c85206d1a2ba34cc9ea8}{P\+E\+R\+I\+P\+H\+E\+R\+A\+L\+\_\+\+B\+A\+S\+E\+\_\+\+A\+D\+D\+R\+\_\+\+P\+H\+Y\+S\+\_\+\+R\+P\+I1}~0x20000000\hypertarget{addressing_8h_aa1daff414a78c85206d1a2ba34cc9ea8}{}\label{addressing_8h_aa1daff414a78c85206d1a2ba34cc9ea8}

\begin{DoxyCompactList}\small\item\em Physical base address of the peripherals memory area on the raspberry 1. \end{DoxyCompactList}\item 
\#define \hyperlink{addressing_8h_ad68b84fe4ccc03889dd2f97adb540ce1}{P\+E\+R\+I\+P\+H\+E\+R\+A\+L\+\_\+\+B\+A\+S\+E\+\_\+\+A\+D\+D\+R\+\_\+\+B\+US}~0x7e000000\hypertarget{addressing_8h_ad68b84fe4ccc03889dd2f97adb540ce1}{}\label{addressing_8h_ad68b84fe4ccc03889dd2f97adb540ce1}

\begin{DoxyCompactList}\small\item\em Bus base address of the peripherals memory area. \end{DoxyCompactList}\item 
\#define \hyperlink{addressing_8h_aa8ff301b980af8b20eb8c4e4b7f3920f}{T\+O\+\_\+\+P\+H\+Y\+S\+\_\+\+M\+EM}(addr)~(addr \& $\sim$0xc0000000)\hypertarget{addressing_8h_aa8ff301b980af8b20eb8c4e4b7f3920f}{}\label{addressing_8h_aa8ff301b980af8b20eb8c4e4b7f3920f}

\begin{DoxyCompactList}\small\item\em Converts physical memory from any alias to alias 0 memory. So it works to convert bus memory to physical memory. \end{DoxyCompactList}\item 
\#define \hyperlink{addressing_8h_a60795a585c4be39ed84daae62ed1041d}{P\+E\+R\+I\+P\+H\+E\+R\+A\+L\+\_\+\+P\+H\+Y\+S\+\_\+\+T\+O\+\_\+\+B\+U\+S\+\_\+\+A\+D\+DR}(addr)~(addr -\/ \hyperlink{addressing_8h_acdf901dd48c013338974daae498fec00}{P\+E\+R\+I\+P\+H\+E\+R\+A\+L\+\_\+\+B\+A\+S\+E\+\_\+\+A\+D\+D\+R\+\_\+\+P\+H\+Y\+S\+\_\+\+R\+P\+I2} + \hyperlink{addressing_8h_ad68b84fe4ccc03889dd2f97adb540ce1}{P\+E\+R\+I\+P\+H\+E\+R\+A\+L\+\_\+\+B\+A\+S\+E\+\_\+\+A\+D\+D\+R\+\_\+\+B\+US})\hypertarget{addressing_8h_a60795a585c4be39ed84daae62ed1041d}{}\label{addressing_8h_a60795a585c4be39ed84daae62ed1041d}

\begin{DoxyCompactList}\small\item\em Converts a peripheral\textquotesingle{}s physical address to it\textquotesingle{}s bus address. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int \hyperlink{addressing_8h_a74311d8932a009c0def7b97b0911d9e3}{addr\+Virt\+To\+Phys} (void $\ast$virt\+Addr, uintptr\+\_\+t $\ast$phys\+Addr\+Ret)
\begin{DoxyCompactList}\small\item\em Gets the physical address corresponding to the provided virtual address. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
uintptr\+\_\+t \hyperlink{addressing_8h_a245eee72d3b42da5ce640ea1be193edb}{peripherals\+Base\+Address\+Phys}\hypertarget{addressing_8h_a245eee72d3b42da5ce640ea1be193edb}{}\label{addressing_8h_a245eee72d3b42da5ce640ea1be193edb}

\begin{DoxyCompactList}\small\item\em Physical base address of the peripherals memory area. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
Provides helper macros for address management. 

See the documentation at \char`\"{}\+B\+C\+M 2835 A\+R\+M Peripherals\char`\"{} pag 4 and following.

In the B\+CM 2835 (also B\+C\+M2836 and B\+C\+M2837) there are three different addressing modes, so we have\+:
\begin{DoxyItemize}
\item Virtual address
\item Physical address
\item Bus address
\end{DoxyItemize}

Virtual addresses span on the whole address space (0x0-\/0xffffffff) Physical addresses from 0x0 to 0x3fffffff (1\+GB) Bus addresses on the whole address space (0x0-\/0xffffffff)

In bus addressing the R\+PI memory is mapped at different addresses in different ways. These areas are called aliases\+:
\begin{DoxyItemize}
\item 0x00000000 -\/ 0x3fffffff \textquotesingle{}0\textquotesingle{} alias\+: L1 and L2 cached
\item 0x40000000 -\/ 0x7fffffff \textquotesingle{}4\textquotesingle{} alias\+: L2 cache coherent (not allocating)
\item 0x80000000 -\/ 0xbfffffff \textquotesingle{}8\textquotesingle{} alias\+: L2 cached only
\item 0xc0000000 -\/ 0xffffffff \textquotesingle{}C\textquotesingle{} alias\+: direct uncached
\end{DoxyItemize}

Peripherals are mapped to physical memory at address 0x20000000 in rpi1 and 0x3f000000 in rpi2 and rpi3. And so are also mapped to bus address in the various aliases. 

\subsection{Function Documentation}
\index{addressing.\+h@{addressing.\+h}!addr\+Virt\+To\+Phys@{addr\+Virt\+To\+Phys}}
\index{addr\+Virt\+To\+Phys@{addr\+Virt\+To\+Phys}!addressing.\+h@{addressing.\+h}}
\subsubsection[{\texorpdfstring{addr\+Virt\+To\+Phys(void $\ast$virt\+Addr, uintptr\+\_\+t $\ast$phys\+Addr\+Ret)}{addrVirtToPhys(void *virtAddr, uintptr_t *physAddrRet)}}]{\setlength{\rightskip}{0pt plus 5cm}int addr\+Virt\+To\+Phys (
\begin{DoxyParamCaption}
\item[{void $\ast$}]{virt\+Addr, }
\item[{uintptr\+\_\+t $\ast$}]{phys\+Addr\+Ret}
\end{DoxyParamCaption}
)}\hypertarget{addressing_8h_a74311d8932a009c0def7b97b0911d9e3}{}\label{addressing_8h_a74311d8932a009c0def7b97b0911d9e3}


Gets the physical address corresponding to the provided virtual address. 


\begin{DoxyParams}{Parameters}
{\em virt\+Addr} & The virtuall address to convert \\
\hline
{\em phys\+Addr\+Ret} & The physical address is rturned here\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 for success, negative for error, 1 if the virtual address isn\textquotesingle{}t in ram 
\end{DoxyReturn}
