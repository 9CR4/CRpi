<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>CRpi: include/memoryManagement/cacheCoherentMemoryProvider.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">CRpi
   </div>
   <div id="projectbrief">A library for rpi with intefaces to: gpio, pwm, dma</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="dir_e79343dc3a7ca08c5f5f31854b5b843b.html">memoryManagement</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">cacheCoherentMemoryProvider.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Provides a way to easily allocate memory areas that are coherent between CPU and DMA.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdint.h&gt;</code><br />
<code>#include &lt;stddef.h&gt;</code><br />
</div>
<p><a href="cacheCoherentMemoryProvider_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structccmb__desc__struct.html">ccmb_desc_struct</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Describes a Cache Coherent Memory Block allocated by <a class="el" href="cacheCoherentMemoryProvider_8cpp.html#a72b3227fd1265a06a6b65e36b4c370ee" title="Provides a way to easily allocate memory areas that are coherent between CPU and DMA. ">ccmp_malloc()</a>  <a href="structccmb__desc__struct.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a05057d32e6fd59ce23d78f2f88d68da2"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a05057d32e6fd59ce23d78f2f88d68da2"></a>
typedef struct <a class="el" href="structccmb__desc__struct.html">ccmb_desc_struct</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cacheCoherentMemoryProvider_8h.html#a05057d32e6fd59ce23d78f2f88d68da2">Ccmb_desc</a></td></tr>
<tr class="memdesc:a05057d32e6fd59ce23d78f2f88d68da2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Describes a Cache Coherent Memory Block allocated by <a class="el" href="cacheCoherentMemoryProvider_8cpp.html#a72b3227fd1265a06a6b65e36b4c370ee" title="Provides a way to easily allocate memory areas that are coherent between CPU and DMA. ">ccmp_malloc()</a> <br /></td></tr>
<tr class="separator:a05057d32e6fd59ce23d78f2f88d68da2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a72b3227fd1265a06a6b65e36b4c370ee"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cacheCoherentMemoryProvider_8h.html#a72b3227fd1265a06a6b65e36b4c370ee">ccmp_malloc</a> (size_t reqSize, <a class="el" href="cacheCoherentMemoryProvider_8h.html#a05057d32e6fd59ce23d78f2f88d68da2">Ccmb_desc</a> *allocatedAreaDesc, unsigned int byteAlignment)</td></tr>
<tr class="memdesc:a72b3227fd1265a06a6b65e36b4c370ee"><td class="mdescLeft">&#160;</td><td class="mdescRight">Provides a way to easily allocate memory areas that are coherent between CPU and DMA.  <a href="#a72b3227fd1265a06a6b65e36b4c370ee">More...</a><br /></td></tr>
<tr class="separator:a72b3227fd1265a06a6b65e36b4c370ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a302470ace4f6aef718d5e017181e733e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cacheCoherentMemoryProvider_8h.html#a302470ace4f6aef718d5e017181e733e">ccmp_free</a> (<a class="el" href="cacheCoherentMemoryProvider_8h.html#a05057d32e6fd59ce23d78f2f88d68da2">Ccmb_desc</a> *allocatedAreaDesc)</td></tr>
<tr class="memdesc:a302470ace4f6aef718d5e017181e733e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Frees a block allocated with <a class="el" href="cacheCoherentMemoryProvider_8cpp.html#a72b3227fd1265a06a6b65e36b4c370ee" title="Provides a way to easily allocate memory areas that are coherent between CPU and DMA. ">ccmp_malloc()</a>  <a href="#a302470ace4f6aef718d5e017181e733e">More...</a><br /></td></tr>
<tr class="separator:a302470ace4f6aef718d5e017181e733e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6001c94574407f5d0f222bcc057d9d9c"><td class="memItemLeft" align="right" valign="top">uintptr_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cacheCoherentMemoryProvider_8h.html#a6001c94574407f5d0f222bcc057d9d9c">ccmp_virtAddrToBusAddr</a> (<a class="el" href="cacheCoherentMemoryProvider_8h.html#a05057d32e6fd59ce23d78f2f88d68da2">Ccmb_desc</a> *desc, void *virtAddr)</td></tr>
<tr class="memdesc:a6001c94574407f5d0f222bcc057d9d9c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Converts a virtual address inside the block described by desc to it's bus address.  <a href="#a6001c94574407f5d0f222bcc057d9d9c">More...</a><br /></td></tr>
<tr class="separator:a6001c94574407f5d0f222bcc057d9d9c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Provides a way to easily allocate memory areas that are coherent between CPU and DMA. </p>
<p>This files provides functions to get blocks of memory with known associated physical address that are cache coherent. This is useful when interfacing with peripherals that access memory directly, bypassing the L1 or L2 caches, like the DMA. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a302470ace4f6aef718d5e017181e733e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ccmp_free </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="cacheCoherentMemoryProvider_8h.html#a05057d32e6fd59ce23d78f2f88d68da2">Ccmb_desc</a> *&#160;</td>
          <td class="paramname"><em>allocatedAreaDesc</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Frees a block allocated with <a class="el" href="cacheCoherentMemoryProvider_8cpp.html#a72b3227fd1265a06a6b65e36b4c370ee" title="Provides a way to easily allocate memory areas that are coherent between CPU and DMA. ">ccmp_malloc()</a> </p>
<dl class="section return"><dt>Returns</dt><dd>negative in case of error </dd></dl>

</div>
</div>
<a class="anchor" id="a72b3227fd1265a06a6b65e36b4c370ee"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ccmp_malloc </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>reqSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="cacheCoherentMemoryProvider_8h.html#a05057d32e6fd59ce23d78f2f88d68da2">Ccmb_desc</a> *&#160;</td>
          <td class="paramname"><em>allocatedAreaDesc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>byteAlignment</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Provides a way to easily allocate memory areas that are coherent between CPU and DMA. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">reqSize</td><td>The size of the block to be allocated. </td></tr>
    <tr><td class="paramname">allocatedAreaDesc</td><td>Here will be returned the descriptor for the allocated block </td></tr>
    <tr><td class="paramname">byteAlignment</td><td>The allocated block will be aligned to this value</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>negative in case of error </dd></dl>

</div>
</div>
<a class="anchor" id="a6001c94574407f5d0f222bcc057d9d9c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uintptr_t ccmp_virtAddrToBusAddr </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="cacheCoherentMemoryProvider_8h.html#a05057d32e6fd59ce23d78f2f88d68da2">Ccmb_desc</a> *&#160;</td>
          <td class="paramname"><em>desc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>virtAddr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Converts a virtual address inside the block described by desc to it's bus address. </p>
<dl class="section return"><dt>Returns</dt><dd>the bus address </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
